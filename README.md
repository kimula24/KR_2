# KR_2
# Задание 1
Перешли на страницу авторизации пользователя и проверили на уязвимость перед sql-инъекциями

<img width="773" height="598" alt="image" src="https://github.com/user-attachments/assets/36cd4bf1-c93e-4092-aeea-54e566efdc75" />

Данный вывод означает что система использует прямые запросы к базе данных посредством сырых SQL-запросов


После выявления уязвимости входим в аккаунт используя условие, которое всегда будет возвращать программе true
<img width="749" height="598" alt="image" src="https://github.com/user-attachments/assets/c0b7bf0d-5807-4acc-aa1f-13b23fce98ac" />

В данном случае ввод означает что if true return true, а значение `--` означает что наш пароль не будет проверяться(отсекается от запроса)


Таким образом мы смогли зайти под аккаунтом администратора сайта

<img width="316" height="264" alt="image" src="https://github.com/user-attachments/assets/f8df9a98-f6a5-4f42-9d85-13a0d1653836" />

Т.к. запрос возвращает 1 совпадение из таблицы БД это может свидетельствовать о том, что администратор стоит 1 в таблице(т.к. по дефолту его создают 1 для просмотра/проверки всех возможностей сайта)


После авторизации, мы также можем увидеть данные, в данном случае для следующих заданий нам интересен токен, который можно посмотреть через средства разработчика(F12)

<img width="2549" height="1365" alt="image" src="https://github.com/user-attachments/assets/75b7858f-2622-405c-a0ea-d85a6fc81e5f" />
<img width="2559" height="1367" alt="image" src="https://github.com/user-attachments/assets/b433a6d0-10af-4734-98da-d08a553494e8" />


### Вопросы для задания 1
1. Что такое SQL инъекция?
Cпособ взлома веб-приложений, при котором злоумышленник вставляет вредоносный SQL-код в запрос к базе данных
2. Почему ввод строки `' or 1=1;--` позволил войти в аккаунт администратора?
Конструкция or 1=1 делает условие всегда истинным, а двойной дефис `--` комментирует оставшуюся часть запроса, включая проверку пароля. В результате система возвращает первую запись из таблицы пользователей
3. Как защитить web-ресурс от подобного рода атак?
   1. Использование параметризованных запросов (Prepared Statements)
   2. Использование ORM
   3. Использовать WAF



### Задание 2
Первое что мы сделали - узнали аккаунт нашего пользователя 

<img width="232" height="237" alt="image" src="https://github.com/user-attachments/assets/61c41804-6482-44bd-9463-96f3f45053a7" />


После этого при помощи нашиих куки файлов и дешифратора получили данные и хэшированный пароль

<img width="1101" height="348" alt="image" src="https://github.com/user-attachments/assets/92ddc55f-4dc4-4462-88e3-8456fef0f2fb" />


При помощи кряка хэша узнали настоящий пароль пользователя

<img width="1126" height="360" alt="image" src="https://github.com/user-attachments/assets/e62f58ac-994d-4297-9683-50fb7c430355" />


### Вопросы для задания 2
1. Какой логин у администратора?
"username":"coupon code"
2. Какой хэш пароля у администратора? 
0192023a7bbd73250516f069df18b500
3. Какой пароль администратора? 
admin123
4. Что такое cookie?
Это небольшие фрагменты данных, которые содержат информацию о пользователе и его действиях на сайте. Они записывают ключевые параметры и важные сведения о посетителе, чтобы затем использовать их при следующем визите на сайт.
5. Какие меры могут быть использованы для устранения выявленной уязвимости?
   1. использвоать JWT
   2. HttpOnly + Secure флаги
   3. Хэширование через bcrypt
   4. Session fixation protection
  
### Задание 3
Открыли корзину, заблаговременно положив в нее какие-то продукты и открыли средства разработчика для изменения токена в localStorage
<img width="2546" height="1341" alt="image" src="https://github.com/user-attachments/assets/d4649d4f-888f-459d-b6ff-8a441768e36d" />


После небольшого изменения токена корзина стала другой

<img width="2535" height="1121" alt="image" src="https://github.com/user-attachments/assets/662897ec-42a1-4315-9ce4-f17dec3df9f5" />

Пустой deluxeToken позволяет обходить проверку корзины - система открывает расширенную корзину без аутентификации токена

Для решения данной проблемы нужно перестать полагаться на пустые значения параметра и добавить строгую серверную валидацию


### Задание 4
За основу была взят репоз с [гитхаба](https://github.com/swisskyrepo/PayloadsAllTheThings/tree/master/XSS%20Injection#xss-using-a-remote-js)
<img width="2415" height="439" alt="image" src="https://github.com/user-attachments/assets/f2bc2ed6-a9b2-4515-b4da-b4dc56bd6f2c" />






